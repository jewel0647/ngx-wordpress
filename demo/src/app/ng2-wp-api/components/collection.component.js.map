{"version":3,"file":"collection.component.js","sourceRoot":"","sources":["../inlined/components/collection.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  Component, Input, Output, EventEmitter, SimpleChanges, OnChanges,\n  ChangeDetectionStrategy\n} from '@angular/core';\n\nimport {WpService} from '../service/wp.service';\nimport {CollectionService} from '../service/collection/collection.service';\nimport {WpQueryArgs} from \"../helpers/wp-query.class\";\n\n\n\nexport class WpCollectionComponent implements OnChanges {\n\n  private collection: CollectionService;\n\n  \n  set endpoint(endpoint) {\n    /** Set collection endpoint */\n    this.collection = this.wpService.collection().endpoint(endpoint);\n  }\n\n  /** QueryArgs input */\n   args;\n\n  /** Output for the response */\n   response = new EventEmitter(true);\n\n  constructor(private wpService: WpService) {\n    this.args = new WpQueryArgs({});\n  }\n\n  /** Detects if args has changed to fetch again. */\n  ngOnChanges(changes: SimpleChanges) {\n\n    let chng = changes['args'];\n    if(chng){\n      let cur  = JSON.stringify(chng.currentValue);\n      let prev = JSON.stringify(chng.previousValue);\n      if(cur !== prev) this.get(chng.currentValue);\n    }\n  }\n\n /** Get collection of items */\n  public get = (args): void => {\n    this.collection.get(args).subscribe((res)=> this.response.emit(res));\n  };\n\n  /** Get more collection (concat current with next page) */\n  public more = (): void => {\n    this.collection.more().subscribe((res)=> this.response.emit(res));\n  };\n\n  /** Get next collection (next page) */\n  public next = (): void => {\n    this.collection.next().subscribe((res)=> this.response.emit(res));\n  };\n\n  /** Get previous collection (prev page) */\n  public prev = (): void => {\n    this.collection.prev().subscribe((res)=> this.response.emit(res));\n  };\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n  selector: 'wp-collection',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  template: `<ng-content></ng-content>`\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: ({type: any, decorators?: DecoratorInvocation[]}|null)[] = [\n{type: WpService, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'endpoint': [{ type: Input },],\n'args': [{ type: Input },],\n'response': [{ type: Output },],\n};\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}